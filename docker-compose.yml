version: "3.3"

services:
  influxdb:
    image: influxdb:2.1
    container_name: influxdb
    ports:
      - "8086:8086"
    environment:
      DOCKER_INFLUXDB_INIT_MODE: setup
      DOCKER_INFLUXDB_INIT_USERNAME: my-user
      DOCKER_INFLUXDB_INIT_PASSWORD: my-password
      DOCKER_INFLUXDB_INIT_ORG: my-org
      DOCKER_INFLUXDB_INIT_BUCKET: my-bucket
      DOCKER_INFLUXDB_INIT_ADMIN_TOKEN: my-admin-token
    # volumes:
    #   - ./influxdb/data:/var/lib/influxdb2
    #   - ./influxdb/config:/etc/influxdb2

  jupyter:
    build: ./jupyter
    container_name: jupyter
    volumes:
        - ./jupyter:/home/docker_worker/jupyter
    ports:
        - 8891:8888
    command: "start-notebook.sh"
    user: root
    env_file:
    - './jupyter/.env'
    environment:
      NB_USER: docker_worker
      NB_UID: 1008
      NB_GID: 1011
      CHOWN_HOME: 'yes'
      CHOWN_HOME_OPTS: -R
